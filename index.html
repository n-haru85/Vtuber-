<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>キャラクターカタログ選択（アニメーション付き）</title>
  <style>
    body {
      font-family: "Segoe UI", sans-serif;
      background: #1e1e2f;
      color: #eee;
      max-width: 600px;
      margin: 40px auto;
      padding: 20px;
      border-radius: 12px;
    }
    h1 {
      text-align: center;
      color: #ffd700;
    }
    ul {
      list-style: none;
      padding: 0;
      margin: 10px 0;
    }
    li {
      background: #2e2e3e;
      margin: 6px 0;
      padding: 10px;
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.3s ease; /* アニメーション追加 */
    }
    li:hover {
      transform: scale(1.05); /* ホバーで少し拡大 */
      background: #3e3e5e;
    }
    li.selected {
      background: #ffd700;
      color: #000;
      font-weight: bold;
      transform: scale(1.1); /* 選択時少し大きくなる */
    }
    button {
      margin-top: 16px;
      padding: 10px 20px;
      border: none;
      border-radius: 8px;
      background: #4caf50;
      color: white;
      font-size: 1em;
      cursor: pointer;
      transition: background 0.3s ease, transform 0.2s ease;
    }
    button:hover {
      background: #43a047;
      transform: scale(1.05); /* ボタンも軽く拡大 */
    }
    .hidden { display: none; }
    .result {
      background: #2e2e3e;
      padding: 16px;
      border-radius: 8px;
      margin-top: 20px;
      opacity: 0;
      transition: opacity 0.5s ease; /* フェードイン */
    }
    .result.visible {
      opacity: 1;
    }
  </style>
</head>
<body>

<h1>キャラクターカタログ選択</h1>

<div id="selection-area">

  <p>髪型を選んでください</p>
  <ul id="hair-list"></ul>

  <p>目を選んでください</p>
  <ul id="eye-list"></ul>

  <p>衣装を選んでください</p>
  <ul id="clothes-list"></ul>

  <p>体型を選んでください</p>
  <ul id="taikei-list"></ul>

  <p>性別を選んでください</p>
  <ul id="seibetu-list"></ul>

  <p>装飾を選んでください</p>
  <ul id="sousyoku-list"></ul>

  <p>身長（100〜200cm）</p>
  <input type="number" id="height" min="100" max="200" step="0.1">

  <button onclick="confirmSelection()">確認する</button>
</div>

<div id="result" class="result">
  <h3>選択内容</h3>
  <p id="summary"></p>
  <p>これでよろしいですか？</p>
  <button onclick="finalize('はい')">はい</button>
  <button onclick="finalize('いいえ')">いいえ</button>
</div>

<div id="thankyou" class="hidden">
  <h2>選択ありがとうございました！</h2>
</div>

<script>
  function createList(id, count){
    const ul = document.getElementById(id);
    for(let i=1;i<=count;i++){
      const li = document.createElement('li');
      li.textContent = i;
      li.onclick = ()=>{
        [...ul.children].forEach(el=>el.classList.remove('selected'));
        li.classList.add('selected');
      };
      ul.appendChild(li);
    }
  }

  createList('hair-list',76);
  createList('eye-list',8);
  createList('clothes-list',8);
  createList('taikei-list',4);
  createList('seibetu-list',3);
  createList('sousyoku-list',20);

  function getSelected(id){
    const selected = document.querySelector(`#${id} li.selected`);
    return selected ? selected.textContent : null;
  }

  function confirmSelection(){
    const hair=getSelected('hair-list');
    const eye=getSelected('eye-list');
    const clothes=getSelected('clothes-list');
    const taikei=getSelected('taikei-list');
    const seibetu=getSelected('seibetu-list');
    const sousyoku=getSelected('sousyoku-list');
    const height=document.getElementById('height').value;

    if(!hair||!eye||!clothes||!taikei||!seibetu||!sousyoku||!height){
      alert("すべての項目を選択してください。");
      return;
    }

    const summary=`
      髪型：${hair}<br>
      目：${eye}<br>
      衣装：${clothes}<br>
      体型：${taikei}<br>
      性別：${seibetu}<br>
      装飾：${sousyoku}<br>
      身長：${parseFloat(height).toFixed(1)} cm
    `;
    document.getElementById('summary').innerHTML=summary;
    document.getElementById('selection-area').classList.add('hidden');
    const resultDiv=document.getElementById('result');
    resultDiv.classList.remove('hidden');
    // フェードイン
    setTimeout(()=>resultDiv.classList.add('visible'),10);
  }

  function finalize(answer){
    if(answer==='いいえ'){
      document.getElementById('selection-area').classList.remove('hidden');
      const resultDiv=document.getElementById('result');
      resultDiv.classList.remove('visible');
      setTimeout(()=>resultDiv.classList.add('hidden'),300); // フェードアウト
    } else if(answer==='はい'){
      document.getElementById('result').classList.remove('visible');
      setTimeout(()=>{
        document.getElementById('result').classList.add('hidden');
        document.getElementById('thankyou').classList.remove('hidden');
      },300);
    }
  }
</script>

</body>
</html>
